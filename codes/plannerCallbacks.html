
<pre style="color:#000000;background:#ffffff;">ï»¿using System<span style="color:#808030; ">.</span>Collections<span style="color:#800080; ">;</span>
<span style="color:#800000; font-weight:bold; ">using</span> System<span style="color:#808030; ">.</span>Collections<span style="color:#808030; ">.</span>Generic<span style="color:#800080; ">;</span>
<span style="color:#800000; font-weight:bold; ">using</span> UnityEngine<span style="color:#800080; ">;</span>

<span style="color:#800000; font-weight:bold; ">public</span> <span style="color:#800000; font-weight:bold; ">class</span> plannerCallbacks <span style="color:#808030; ">:</span> MonoBehaviour
<span style="color:#800080; ">{</span>
    Moves moves<span style="color:#800080; ">;</span>
    UnityEngine<span style="color:#808030; ">.</span>AI<span style="color:#808030; ">.</span>NavMeshAgent agent<span style="color:#800080; ">;</span>

    <span style="color:#800000; font-weight:bold; ">void</span> Start<span style="color:#808030; ">(</span><span style="color:#808030; ">)</span>
    <span style="color:#800080; ">{</span>
        moves <span style="color:#808030; ">=</span> <span style="color:#800000; font-weight:bold; ">this</span><span style="color:#808030; ">.</span>GetComponent<span style="color:#808030; ">&lt;</span>Moves<span style="color:#808030; ">&gt;</span><span style="color:#808030; ">(</span><span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
        agent <span style="color:#808030; ">=</span> <span style="color:#800000; font-weight:bold; ">this</span><span style="color:#808030; ">.</span>GetComponent<span style="color:#808030; ">&lt;</span>UnityEngine<span style="color:#808030; ">.</span>AI<span style="color:#808030; ">.</span>NavMeshAgent<span style="color:#808030; ">&gt;</span><span style="color:#808030; ">(</span><span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
    <span style="color:#800080; ">}</span>

    <span style="color:#800000; font-weight:bold; ">public</span> <span style="color:#800000; font-weight:bold; ">void</span> Steal<span style="color:#808030; ">(</span>GameObject treasure<span style="color:#808030; ">)</span>
    <span style="color:#800080; ">{</span>
        treasure<span style="color:#808030; ">.</span>GetComponent<span style="color:#808030; ">&lt;</span>Renderer<span style="color:#808030; ">&gt;</span><span style="color:#808030; ">(</span><span style="color:#808030; ">)</span><span style="color:#808030; ">.</span>enabled <span style="color:#808030; ">=</span> <span style="color:#800000; font-weight:bold; ">false</span><span style="color:#800080; ">;</span>
    <span style="color:#800080; ">}</span>

    <span style="color:#800000; font-weight:bold; ">public</span> IEnumerator Seek<span style="color:#808030; ">(</span>GameObject treasure<span style="color:#808030; ">,</span> GameObject copGO<span style="color:#808030; ">)</span>
    <span style="color:#800080; ">{</span>
        agent<span style="color:#808030; ">.</span>SetDestination<span style="color:#808030; ">(</span>treasure<span style="color:#808030; ">.</span>transform<span style="color:#808030; ">.</span>position<span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
        <span style="color:#800000; font-weight:bold; ">while</span> <span style="color:#808030; ">(</span><span style="color:#808030; ">(</span>Vector3<span style="color:#808030; ">.</span>Distance<span style="color:#808030; ">(</span>treasure<span style="color:#808030; ">.</span>transform<span style="color:#808030; ">.</span>position<span style="color:#808030; ">,</span> transform<span style="color:#808030; ">.</span>position<span style="color:#808030; ">)</span> <span style="color:#808030; ">&gt;</span> 2f<span style="color:#808030; ">)</span> &amp;&amp;
               <span style="color:#808030; ">(</span>Vector3<span style="color:#808030; ">.</span>Distance<span style="color:#808030; ">(</span>treasure<span style="color:#808030; ">.</span>transform<span style="color:#808030; ">.</span>position<span style="color:#808030; ">,</span> copGO<span style="color:#808030; ">.</span>transform<span style="color:#808030; ">.</span>position<span style="color:#808030; ">)</span> <span style="color:#808030; ">&gt;</span> 10f<span style="color:#808030; ">)</span><span style="color:#808030; ">)</span>
            <span style="color:#800000; font-weight:bold; ">yield return</span> <span style="color:#800000; font-weight:bold; ">null</span><span style="color:#800080; ">;</span>
    <span style="color:#800080; ">}</span>

    <span style="color:#800000; font-weight:bold; ">public</span> IEnumerator Wander<span style="color:#808030; ">(</span>GameObject cop<span style="color:#808030; ">,</span> GameObject treasure<span style="color:#808030; ">)</span>
    <span style="color:#800080; ">{</span>
        <span style="color:#800000; font-weight:bold; ">while</span> <span style="color:#808030; ">(</span>Vector3<span style="color:#808030; ">.</span>Distance<span style="color:#808030; ">(</span>treasure<span style="color:#808030; ">.</span>transform<span style="color:#808030; ">.</span>position<span style="color:#808030; ">,</span> cop<span style="color:#808030; ">.</span>transform<span style="color:#808030; ">.</span>position<span style="color:#808030; ">)</span> <span style="color:#808030; ">&lt;</span> 10f<span style="color:#808030; ">)</span>
        <span style="color:#800080; ">{</span>
            moves<span style="color:#808030; ">.</span>Wander<span style="color:#808030; ">(</span><span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
            <span style="color:#800000; font-weight:bold; ">yield return</span> <span style="color:#800000; font-weight:bold; ">null</span><span style="color:#800080; ">;</span>
        <span style="color:#800080; ">}</span>
    <span style="color:#800080; ">}</span>    
<span style="color:#800080; ">}</span>
</pre>

